<!DOTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style>
      body{
        margin:0;
        padding:0;
      }
      #topnavi{
        background-color:#ffab11;
      }
    </style>
  </head>
  <body onload="ve()">
    <div id="pagewrapper">
      <div id="topnavi">
        <p>作る、見る、？？、Scratchについて</p>
      </div>
      <div id="content">
        <div>
          <h3 id="username">*</h3>
          <p>text</p>
        </div>
        <div>
          
        </div>
      </div>
    </div>
    <div id="footer">
      
    </div>
    <script>
      var sc={username:"",jsondata:{user:""}};
      let url = new URL(window.location.href);
      let params = url.searchParams;
      sc.username=params.get("user");
      async function r(){
        try{
          await fetch("https://scratchapi2.glitch.me/https://api.scratch.mit.edu/users/"+sc.username);
        }catch(e){
          sc.jsondata="*error"
        }
        if(sc.jsondata!="*error"){
          sc.jsondata.user=await(await fetch("https://scratchapi2.glitch.me/https://api.scratch.mit.edu/users/"+sc.username)).json();
        }
      }
      

      /*読み込み後にするやつ*/
      async function ve(){
        await r();
        document.getElementById('username').textContent=sc.jsondata.user.username;
      }
      /**/
    </script>
  </body>
</html>
